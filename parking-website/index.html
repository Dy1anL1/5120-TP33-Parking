<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Melbourne Parking Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <link rel="stylesheet" href="style.css"/>
  
  <!-- Hide content on page load -->
  <style>body { display: none; }</style>
</head>
<body>
  <!-- password verification -->
  <script>
    (function () {
      const pwd = prompt("Please enter the password:");
      if (pwd === "tp33") {
        document.body.style.display = "block"; // Display page
      } else {
        document.body.innerHTML = "<h2>Access Denied</h2>";
        document.body.style.display = "block";
        if (window.stop) window.stop(); // Blocking subsequent loads
      }
    })();
  </script>

  <header>
    <h1>Melbourne CBD Parking Availability</h1>
  </header>

  <div class="container">
    <aside id="sidebar">
      <!-- destination search -->
      <div style="margin-bottom:10px;">
        <input type="text" id="destInput" placeholder="Destination (address/place)..." style="width:100%;padding:8px;">
        <button id="destBtn" style="width:100%;margin-top:6px;padding:8px;">Find nearest</button>
      </div>

      <!-- Prediction Feature -->
      <div style="margin-bottom:15px; padding:10px; background:#f5f5f5; border-radius:5px;">
        <h3 style="margin:0 0 10px 0; font-size:14px;">Predict Parking Availability in 1 Hour</h3>
        <div style="display:flex; gap:5px;">
          <button id="predictBtn" style="flex:1; padding:8px; background:#4CAF50; color:white; border:none; border-radius:3px; cursor:pointer;">Predict in 1 Hour</button>
          <button id="clearPredictionBtn" style="padding:8px; background:#f44336; color:white; border:none; border-radius:3px; cursor:pointer; font-size:12px;">Clear</button>
        </div>
        <div id="predictionResult" style="margin-top:10px; font-size:12px;"></div>
      </div>

      <input type="text" id="searchBox" placeholder="Search by street or ID..." />
      <label style="display:block; margin:8px 0;">
        <input type="checkbox" id="onlyAvailable" /> Only show available
      </label>
      <ul id="parkingList"></ul>
    </aside>
    
    <main>
      <div id="map"></div>
      <div id="legend" class="legend" aria-live="polite">
        <div><span class="swatch swatch-high"></span> High availability (&gt; 50%)</div>
        <div><span class="swatch swatch-mid"></span> Middle (20-50%)</div>
        <div><span class="swatch swatch-low"></span> Low (&lt; 20%)</div>
        <div><span class="swatch swatch-na"></span> No data</div>
      </div>
      <div id="predictionLegend" class="prediction-legend" aria-live="polite" style="display: none;">
        <div><span class="prediction-swatch prediction-swatch-available"></span> Predicted Available</div>
        <div><span class="prediction-swatch prediction-swatch-occupied"></span> Predicted Occupied</div>
      </div>
    </main>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
